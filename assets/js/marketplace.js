// ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ≥ŸàŸÇ
        const marketplaceData = {
            user: {
                name: "ÿ£ÿ≠ŸÖÿØ ŸÖÿ≠ŸÖÿØ",
                level: 5,
                role: "ŸÖŸÜÿ¥ÿ¶ ŸÖÿ≠ÿ™ŸàŸâ",
                wallet: 1250,
                products: 12,
                sales: 3200,
                rating: 4.8
            },
            worlds: [
                {
                    id: 1,
                    title: "ÿπÿßŸÑŸÖ ÿßŸÑŸÅŸÜ ÿßŸÑÿ±ŸÇŸÖŸä ÿßŸÑŸÖÿ™ŸÇÿØŸÖ",
                    creator: "ŸÅÿ±ŸäŸÇ ÿßŸÑÿ•ÿ®ÿØÿßÿπ",
                    price: 299,
                    oldPrice: 399,
                    description: "ÿπÿßŸÑŸÖ ŸÖÿ™ŸÉÿßŸÖŸÑ ŸÑŸÑŸÅŸÜÿßŸÜŸäŸÜ ÿßŸÑÿ±ŸÇŸÖŸäŸäŸÜ ÿ®ŸÖŸÉÿ™ÿ®ÿ© ÿ£ÿØŸàÿßÿ™ ÿ¥ÿßŸÖŸÑÿ© Ÿàÿ™ŸÅÿßÿπŸÑÿßÿ™ ŸÅÿ±ŸäÿØÿ©",
                    image: "üé®",
                    type: "premium",
                    rating: 4.9,
                    sales: 1247,
                    category: "ŸÅŸÜŸàŸÜ"
                },
                {
                    id: 2,
                    title: "ÿπÿßŸÑŸÖ ÿßŸÑÿ®ÿ±ŸÖÿ¨ÿ© ÿßŸÑÿ™ŸÅÿßÿπŸÑŸä",
                    creator: "ŸÖÿ∑Ÿàÿ±ŸäŸÜ ŸÖÿ®ÿØÿπŸäŸÜ",
                    price: 199,
                    oldPrice: null,
                    description: "ÿ™ÿπŸÑŸÖ ÿßŸÑÿ®ÿ±ŸÖÿ¨ÿ© ÿ®ÿ∑ÿ±ŸäŸÇÿ© ÿ™ŸÅÿßÿπŸÑŸäÿ© ŸÖÿπ ÿ™ÿ≠ÿØŸäÿßÿ™ ÿ≠Ÿäÿ© ŸàŸÖÿ¥ÿßÿ±Ÿäÿπ ŸàÿßŸÇÿπŸäÿ©",
                    image: "üíª",
                    type: "regular",
                    rating: 4.7,
                    sales: 892,
                    category: "ÿ™ÿπŸÑŸäŸÖ"
                },
                {
                    id: 3,
                    title: "ŸÖÿ¨ÿ™ŸÖÿπ ÿßŸÑŸÑŸäÿßŸÇÿ© ÿßŸÑÿ®ÿØŸÜŸäÿ©",
                    creator: "ŸÖÿØÿ±ÿ®ŸäŸÜ ŸÖÿ≠ÿ™ÿ±ŸÅŸäŸÜ",
                    price: 149,
                    oldPrice: 199,
                    description: "ÿßŸÜÿ∂ŸÖ ÿ•ŸÑŸâ ŸÖÿ¨ÿ™ŸÖÿπ ÿßŸÑŸÑŸäÿßŸÇÿ© ÿßŸÑÿ£ŸÉÿ®ÿ± ŸÖÿπ ÿ™ŸÖÿßÿ±ŸäŸÜ ÿ≠Ÿäÿ© Ÿàÿ™ÿ≠ÿØŸäÿßÿ™ ŸäŸàŸÖŸäÿ©",
                    image: "üí™",
                    type: "discount",
                    rating: 4.8,
                    sales: 2105,
                    category: "ÿµÿ≠ÿ©"
                },
                {
                    id: 4,
                    title: "ÿπÿßŸÑŸÖ ÿßŸÑŸÖŸàÿ≥ŸäŸÇŸâ ŸàÿßŸÑÿ•ÿ®ÿØÿßÿπ",
                    creator: "ŸÅŸÜÿßŸÜŸäŸÜ ÿπÿßŸÑŸÖŸäŸäŸÜ",
                    price: 0,
                    oldPrice: null,
                    description: "ÿßÿ≥ÿ™ŸÉÿ¥ŸÅ ÿπÿßŸÑŸÖ ÿßŸÑŸÖŸàÿ≥ŸäŸÇŸâ ŸÖÿπ ÿ£ÿØŸàÿßÿ™ ŸÖÿ¨ÿßŸÜŸäÿ© ŸàŸàÿ±ÿ¥ ÿπŸÖŸÑ ÿ™ŸÅÿßÿπŸÑŸäÿ©",
                    image: "üéµ",
                    type: "free",
                    rating: 4.6,
                    sales: 3567,
                    category: "ÿ™ÿ±ŸÅŸäŸá"
                },
                {
                    id: 5,
                    title: "ŸÖŸÜÿµÿ© ÿßŸÑÿ™ÿπŸÑŸäŸÖ ÿßŸÑÿ∞ŸÉŸä",
                    creator: "ÿÆÿ®ÿ±ÿßÿ° ÿ™ÿπŸÑŸäŸÖ",
                    price: 249,
                    oldPrice: 349,
                    description: "ŸÖŸÜÿµÿ© ÿ™ÿπŸÑŸäŸÖŸäÿ© ÿ∞ŸÉŸäÿ© ÿ®ÿ™ŸÇŸÜŸäÿßÿ™ ÿßŸÑÿ∞ŸÉÿßÿ° ÿßŸÑÿßÿµÿ∑ŸÜÿßÿπŸä ÿßŸÑŸÖÿ™ŸÇÿØŸÖÿ©",
                    image: "üß†",
                    type: "premium",
                    rating: 4.9,
                    sales: 567,
                    category: "ÿ™ÿπŸÑŸäŸÖ"
                },
                {
                    id: 6,
                    title: "ÿπÿßŸÑŸÖ ÿßŸÑÿ£ŸÑÿπÿßÿ® ÿßŸÑÿßÿ≥ÿ™ÿ±ÿßÿ™Ÿäÿ¨Ÿäÿ©",
                    creator: "ŸÖÿµŸÖŸÖŸä ÿ£ŸÑÿπÿßÿ®",
                    price: 179,
                    oldPrice: null,
                    description: "ÿßŸÜÿ∂ŸÖ ÿ•ŸÑŸâ ÿπÿßŸÑŸÖ ÿßŸÑÿ£ŸÑÿπÿßÿ® ÿßŸÑÿßÿ≥ÿ™ÿ±ÿßÿ™Ÿäÿ¨Ÿäÿ© ŸÖÿπ ŸÖŸÜÿßŸÅÿ≥ÿßÿ™ ÿ≠Ÿäÿ© Ÿàÿ¨Ÿàÿßÿ¶ÿ≤ ŸÇŸäŸÖÿ©",
                    image: "üéÆ",
                    type: "regular",
                    rating: 4.5,
                    sales: 1342,
                    category: "ÿ£ŸÑÿπÿßÿ®"
                }
            ],
            tools: [
                {
                    id: 101,
                    title: "ŸÖÿ¨ŸÖŸàÿπÿ© ÿ£ŸäŸÇŸàŸÜÿßÿ™ ŸÖŸÖŸäÿ≤ÿ©",
                    creator: "ŸÖÿµŸÖŸÖ ÿ¨ÿ±ÿßŸÅŸäŸÉ",
                    price: 49,
                    description: "150 ÿ£ŸäŸÇŸàŸÜÿ© ÿπÿßŸÑŸäÿ© ÿßŸÑÿ¨ŸàÿØÿ© ÿ®ÿ™ÿµŸÖŸäŸÖ ÿπÿµÿ±Ÿä",
                    image: "üé®",
                    category: "ÿ£ŸäŸÇŸàŸÜÿßÿ™",
                    rating: 4.8,
                    sales: 289
                },
                {
                    id: 102,
                    title: "ŸÇŸàÿßŸÑÿ® Ÿàÿßÿ¨Ÿáÿßÿ™ ÿ¨ÿßŸáÿ≤ÿ©",
                    creator: "ŸÖÿ∑Ÿàÿ± Ÿàÿßÿ¨Ÿáÿßÿ™",
                    price: 79,
                    description: "10 ŸÇŸàÿßŸÑÿ® ÿßÿ≠ÿ™ÿ±ÿßŸÅŸäÿ© ŸÑŸàÿßÿ¨Ÿáÿßÿ™ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ",
                    image: "üì±",
                    category: "ŸÇŸàÿßŸÑÿ®",
                    rating: 4.7,
                    sales: 156
                },
                {
                    id: 103,
                    title: "ŸÖŸÉÿ™ÿ®ÿ© ŸÖÿ§ÿ´ÿ±ÿßÿ™ ÿ®ÿµÿ±Ÿäÿ©",
                    creator: "ŸÅŸÜÿßŸÜ ŸÖÿ±ÿ¶Ÿä",
                    price: 99,
                    description: "ŸÖÿ¨ŸÖŸàÿπÿ© ŸÖÿ§ÿ´ÿ±ÿßÿ™ ÿ®ÿµÿ±Ÿäÿ© ŸÖÿ™ŸÇÿØŸÖÿ© ŸÑŸÑÿπŸàÿßŸÑŸÖ",
                    image: "‚ú®",
                    category: "ŸÖÿ§ÿ´ÿ±ÿßÿ™",
                    rating: 4.9,
                    sales: 421
                }
            ],
            transactions: [
                {
                    id: 1001,
                    type: "income",
                    title: "ÿ®Ÿäÿπ ÿπÿßŸÑŸÖ ÿßŸÑÿ®ÿ±ŸÖÿ¨ÿ©",
                    description: "ÿπŸÖŸàŸÑÿ© ŸÖŸÜ ÿ®Ÿäÿπ ÿßŸÑŸÖŸÜÿ™ÿ¨",
                    amount: 45,
                    date: "2023-10-15",
                    time: "14:30"
                },
                {
                    id: 1002,
                    type: "expense",
                    title: "ÿ¥ÿ±ÿßÿ° ÿ£ÿØŸàÿßÿ™ ÿ™ÿµŸÖŸäŸÖ",
                    description: "ŸÖÿ¨ŸÖŸàÿπÿ© ÿ£ŸäŸÇŸàŸÜÿßÿ™ ŸÖŸÖŸäÿ≤ÿ©",
                    amount: -49,
                    date: "2023-10-14",
                    time: "09:15"
                },
                {
                    id: 1003,
                    type: "income",
                    title: "ŸÖŸÉÿßŸÅÿ£ÿ© ŸÜÿ¥ÿßÿ∑",
                    description: "ŸÖŸÉÿßŸÅÿ£ÿ© ÿßŸÑŸÜÿ¥ÿßÿ∑ ÿßŸÑÿ¥Ÿáÿ±Ÿä",
                    amount: 100,
                    date: "2023-10-10",
                    time: "08:00"
                },
                {
                    id: 1004,
                    type: "income",
                    title: "ÿ®Ÿäÿπ ŸÇÿßŸÑÿ® Ÿàÿßÿ¨Ÿáÿ©",
                    description: "ÿπŸÖŸàŸÑÿ© ŸÖŸÜ ÿ®Ÿäÿπ ÿßŸÑŸÖŸÜÿ™ÿ¨",
                    amount: 23,
                    date: "2023-10-08",
                    time: "16:45"
                }
            ]
        };

        // ÿ≠ÿßŸÑÿ© ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ
        let currentState = {
            activeTab: 'worlds',
            selectedProduct: null,
            cart: [],
            wishlist: []
        };

        // ÿ™ŸáŸäÿ¶ÿ© ÿßŸÑÿ≥ŸàŸÇ
        document.addEventListener('DOMContentLoaded', function() {
            initializeMarketplace();
        });

        function initializeMarketplace() {
            loadUserData();
            loadWorlds();
            loadTools();
            loadTransactions();
            setupEventListeners();
        }

        function loadUserData() {
            // ÿ™ÿ≠ÿØŸäÿ´ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ
            document.getElementById('walletAmount').textContent = marketplaceData.user.wallet.toLocaleString();
            
            // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ®ÿ∑ÿßŸÇÿ© ÿßŸÑÿ¥ÿÆÿµŸäÿ©
            document.querySelector('.profile-details h2').textContent = marketplaceData.user.name;
            document.querySelector('.profile-details p').textContent = `ŸÖÿ≥ÿ™ŸàŸâ ${marketplaceData.user.level} - ${marketplaceData.user.role}`;
            
            // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™
            document.querySelectorAll('.stat-value')[0].textContent = marketplaceData.user.products;
            document.querySelectorAll('.stat-value')[1].textContent = marketplaceData.user.sales.toLocaleString();
            document.querySelectorAll('.stat-value')[2].textContent = marketplaceData.user.rating;
        }

        function loadWorlds() {
            const container = document.getElementById('worldsGrid');
            container.innerHTML = '';

            marketplaceData.worlds.forEach(world => {
                const worldCard = createProductCard(world, 'world');
                container.appendChild(worldCard);
            });
        }

        function loadTools() {
            const container = document.getElementById('toolsGrid');
            container.innerHTML = '';

            marketplaceData.tools.forEach(tool => {
                const toolCard = createProductCard(tool, 'tool');
                container.appendChild(toolCard);
            });
        }

        function loadTransactions() {
            const container = document.getElementById('transactionsList');
            container.innerHTML = '';

            marketplaceData.transactions.forEach(transaction => {
                const transactionItem = createTransactionItem(transaction);
                container.appendChild(transactionItem);
            });
        }

        function createProductCard(product, type) {
            const card = document.createElement('div');
            card.className = `product-card ${product.type === 'premium' ? 'premium' : ''}`;
            card.dataset.id = product.id;
            card.dataset.type = type;
            
            let badge = '';
            if (product.type === 'premium') {
                badge = '<div class="product-badge">ŸÖŸÖŸäÿ≤</div>';
            } else if (product.type === 'discount') {
                badge = '<div class="product-badge">ÿÆÿµŸÖ</div>';
            } else if (product.type === 'free') {
                badge = '<div class="product-badge">ŸÖÿ¨ÿßŸÜŸä</div>';
            }
            
            let oldPrice = '';
            if (product.oldPrice) {
                oldPrice = `<span class="old-price">${product.oldPrice}</span>`;
            }
            
            let priceDisplay = '';
            if (product.price === 0) {
                priceDisplay = '<div class="product-price">ŸÖÿ¨ÿßŸÜŸä</div>';
            } else {
                priceDisplay = `
                    <div class="product-price">
                        ${product.price} ŸÜŸÇÿ∑ÿ©
                        ${oldPrice}
                    </div>
                `;
            }
            
            card.innerHTML = `
                ${badge}
                <div class="product-image">
                    ${product.image}
                </div>
                <div class="product-content">
                    <div class="product-header">
                        <div>
                            <div class="product-title">${product.title}</div>
                            <div class="product-creator">ÿ®Ÿàÿßÿ≥ÿ∑ÿ© ${product.creator}</div>
                        </div>
                        ${priceDisplay}
                    </div>
                    <div class="product-description">${product.description}</div>
                    <div class="product-stats">
                        <span>‚≠ê ${product.rating}</span>
                        <span>üõí ${product.sales.toLocaleString()}</span>
                    </div>
                    <div class="product-actions">
                        <button class="buy-btn" data-product='${JSON.stringify(product).replace(/'/g, "\\'")}'>
                            ${product.price === 0 ? 'ÿßÿ≠ÿµŸÑ ŸÖÿ¨ÿßŸÜÿßŸã' : 'ÿ¥ÿ±ÿßÿ° ÿßŸÑÿ¢ŸÜ'}
                        </button>
                        <button class="wishlist-btn">
                            <i class="fas fa-heart"></i>
                        </button>
                    </div>
                </div>
            `;
            
            return card;
        }

        function createTransactionItem(transaction) {
            const item = document.createElement('div');
            item.className = 'transaction-item';
            
            const iconClass = transaction.type === 'income' ? 'income' : 'expense';
            const icon = transaction.type === 'income' ? 'fas fa-arrow-down' : 'fas fa-arrow-up';
            
            item.innerHTML = `
                <div class="transaction-info">
                    <div class="transaction-icon ${iconClass}">
                        <i class="${icon}"></i>
                    </div>
                    <div class="transaction-details">
                        <h4>${transaction.title}</h4>
                        <p>${transaction.description} ‚Ä¢ ${transaction.date}</p>
                    </div>
                </div>
                <div class="transaction-amount ${iconClass}">
                    ${transaction.type === 'income' ? '+' : ''}${transaction.amount} ŸÜŸÇÿ∑ÿ©
                </div>
            `;
            
            return item;
        }

        function setupEventListeners() {
            // ÿ™ÿ®ŸàŸäÿ®ÿßÿ™ ÿßŸÑÿ≥ŸàŸÇ
            document.querySelectorAll('.marketplace-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    const targetTab = this.dataset.tab;
                    
                    // ÿ•ÿ≤ÿßŸÑÿ© ÿßŸÑŸÜÿ¥ÿßÿ∑ ŸÖŸÜ ÿ¨ŸÖŸäÿπ ÿßŸÑÿ™ÿ®ŸàŸäÿ®ÿßÿ™
                    document.querySelectorAll('.marketplace-tab').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    // ÿ•ÿÆŸÅÿßÿ° ÿ¨ŸÖŸäÿπ ÿßŸÑÿ£ŸÇÿ≥ÿßŸÖ
                    document.querySelectorAll('.content-section').forEach(section => {
                        section.classList.remove('active');
                    });
                    
                    // ÿ•ÿ∏Ÿáÿßÿ± ÿßŸÑŸÇÿ≥ŸÖ ÿßŸÑŸÖÿ≠ÿØÿØ
                    document.getElementById(`${targetTab}-content`).classList.add('active');
                });
            });

            // ŸÅŸÑÿ™ÿ± ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    // ŸáŸÜÿß ŸäŸÖŸÉŸÜ ÿ™ÿ∑ÿ®ŸäŸÇ ÿßŸÑŸÅŸÑÿ™ÿ±ÿ©
                });
            });

            // ÿ£ÿ≤ÿ±ÿßÿ± ÿßŸÑÿ¥ÿ±ÿßÿ°
            document.addEventListener('click', function(e) {
                if (e.target.closest('.buy-btn')) {
                    const btn = e.target.closest('.buy-btn');
                    const product = JSON.parse(btn.dataset.product);
                    openPurchaseModal(product);
                }

                if (e.target.closest('.wishlist-btn')) {
                    const btn = e.target.closest('.wishlist-btn');
                    btn.classList.toggle('active');
                    
                    if (btn.classList.contains('active')) {
                        showNotification('ÿ™ŸÖÿ™ ÿßŸÑÿ•ÿ∂ÿßŸÅÿ© ÿ•ŸÑŸâ ÿßŸÑŸÖŸÅÿ∂ŸÑÿ©');
                    } else {
                        showNotification('ÿ™ŸÖÿ™ ÿßŸÑÿ•ÿ≤ÿßŸÑÿ© ŸÖŸÜ ÿßŸÑŸÖŸÅÿ∂ŸÑÿ©');
                    }
                }

                if (e.target.closest('.subscribe-btn')) {
                    const btn = e.target.closest('.subscribe-btn');
                    const plan = btn.dataset.plan;
                    handleSubscription(plan);
                }
            });

            // ŸÜÿßŸÅÿ∞ÿ© ÿßŸÑÿ¥ÿ±ÿßÿ°
            document.getElementById('closeModal').addEventListener('click', closePurchaseModal);
            document.getElementById('confirmPurchase').addEventListener('click', confirmPurchase);

            // ÿ∑ÿ±ŸÇ ÿßŸÑÿØŸÅÿπ
            document.querySelectorAll('.payment-option').forEach(option => {
                option.addEventListener('click', function() {
                    document.querySelectorAll('.payment-option').forEach(o => o.classList.remove('active'));
                    this.classList.add('active');
                });
            });

            // ÿ≤ÿ± ÿßŸÑÿπŸàÿØÿ©
            document.getElementById('backBtn').addEventListener('click', function() {
                window.history.back();
            });

            // ÿ£ÿ≤ÿ±ÿßÿ± ÿßŸÑÿßŸÇÿ™ÿµÿßÿØ
            document.getElementById('addFundsBtn').addEventListener('click', function() {
                showNotification('ÿ¨ÿßÿ±Ÿä ŸÅÿ™ÿ≠ ŸÜÿßŸÅÿ∞ÿ© ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑÿ±ÿµŸäÿØ...');
            });

            document.getElementById('withdrawBtn').addEventListener('click', function() {
                showNotification('ÿ¨ÿßÿ±Ÿä ŸÅÿ™ÿ≠ ŸÜÿßŸÅÿ∞ÿ© ÿ≥ÿ≠ÿ® ÿßŸÑÿ£ÿ±ÿ®ÿßÿ≠...');
            });

            document.getElementById('transferBtn').addEventListener('click', function() {
                showNotification('ÿ¨ÿßÿ±Ÿä ŸÅÿ™ÿ≠ ŸÜÿßŸÅÿ∞ÿ© ÿ™ÿ≠ŸàŸäŸÑ ÿßŸÑÿ±ÿµŸäÿØ...');
            });

            document.getElementById('giftBtn').addEventListener('click', function() {
                showNotification('ÿ¨ÿßÿ±Ÿä ŸÅÿ™ÿ≠ ŸÜÿßŸÅÿ∞ÿ© ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑŸáÿØÿßŸäÿß...');
            });
        }

        function openPurchaseModal(product) {
            currentState.selectedProduct = product;
            
            // ÿ™ÿ≠ÿØŸäÿ´ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÜÿßŸÅÿ∞ÿ©
            document.getElementById('modalProductImage').textContent = product.image;
            document.getElementById('modalProductTitle').textContent = product.title;
            document.getElementById('modalProductCreator').textContent = `ÿ®Ÿàÿßÿ≥ÿ∑ÿ© ${product.creator}`;
            
            if (product.price === 0) {
                document.getElementById('modalProductPrice').textContent = 'ŸÖÿ¨ÿßŸÜŸä';
            } else {
                document.getElementById('modalProductPrice').textContent = `${product.price} ŸÜŸÇÿ∑ÿ©`;
            }
            
            // ÿ•ÿ∏Ÿáÿßÿ± ÿßŸÑŸÜÿßŸÅÿ∞ÿ©
            document.getElementById('purchaseModal').classList.add('active');
        }

        function closePurchaseModal() {
            document.getElementById('purchaseModal').classList.remove('active');
            currentState.selectedProduct = null;
        }

        function confirmPurchase() {
            if (!currentState.selectedProduct) return;
            
            const product = currentState.selectedProduct;
            const paymentMethod = document.querySelector('.payment-option.active').dataset.method;
            
            if (product.price > 0 && paymentMethod === 'wallet') {
                if (marketplaceData.user.wallet < product.price) {
                    showNotification('ÿ±ÿµŸäÿØŸÉ ÿ∫Ÿäÿ± ŸÉÿßŸÅŸäÿå Ÿäÿ±ÿ¨Ÿâ ÿ•ÿ∂ÿßŸÅÿ© ÿ±ÿµŸäÿØ', 'error');
                    return;
                }
                
                // ÿÆÿµŸÖ ÿßŸÑŸÖÿ®ŸÑÿ∫ ŸÖŸÜ ÿßŸÑŸÖÿ≠ŸÅÿ∏ÿ©
                marketplaceData.user.wallet -= product.price;
                document.getElementById('walletAmount').textContent = marketplaceData.user.wallet.toLocaleString();
            }
            
            // ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑŸÖŸÜÿ™ÿ¨ ÿ•ŸÑŸâ ÿßŸÑÿ≥ŸÑÿ©
            currentState.cart.push(product);
            
            showNotification(`ÿ™ŸÖ ÿ¥ÿ±ÿßÿ° "${product.title}" ÿ®ŸÜÿ¨ÿßÿ≠! üéâ`);
            closePurchaseModal();
            
            // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™
            marketplaceData.user.sales += 1;
            loadUserData();
        }

        function handleSubscription(plan) {
            if (plan === 'basic') {
                showNotification('ÿ£ŸÜÿ™ ÿ™ÿ≥ÿ™ÿÆÿØŸÖ ÿßŸÑÿÆÿ∑ÿ© ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿäÿ© ÿ≠ÿßŸÑŸäÿßŸã');
                return;
            }
            
            const planPrices = {
                premium: 49,
                professional: 99
            };
            
            const price = planPrices[plan];
            const planNames = {
                premium: 'ÿßŸÑŸÖŸÖŸäÿ≤ÿ©',
                professional: 'ÿßŸÑÿßÿ≠ÿ™ÿ±ÿßŸÅŸäÿ©'
            };
            
            showNotification(`ÿ¨ÿßÿ±Ÿä ÿ™ÿ±ŸÇŸäÿ© ÿ≠ÿ≥ÿßÿ®ŸÉ ÿ•ŸÑŸâ ÿßŸÑÿÆÿ∑ÿ© ${planNames[plan]} ÿ®ŸÇŸäŸÖÿ© ${price} ŸÜŸÇÿ∑ÿ©`);
            
            // ŸáŸÜÿß ÿ≥Ÿäÿ™ŸÖ ÿ•ÿ¨ÿ±ÿßÿ° ÿπŸÖŸÑŸäÿ© ÿßŸÑÿØŸÅÿπ ŸàÿßŸÑÿ™ÿ±ŸÇŸäÿ©
        }

        function showNotification(message, type = 'success') {
            // ÿ•ŸÜÿ¥ÿßÿ° ÿ•ÿ¥ÿπÿßÿ±
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 100px;
                left: 50%;
                transform: translateX(-50%);
                background: ${type === 'error' ? '#ef4444' : 'var(--gradient-primary)'};
                color: white;
                padding: 12px 20px;
                border-radius: var(--radius-md);
                z-index: 3000;
                font-size: 14px;
                font-weight: 600;
                box-shadow: var(--shadow-lg);
            `;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // ŸÖÿ≠ÿßŸÉÿßÿ© API calls ŸÑŸÑÿ±ÿ®ÿ∑ ŸÖÿπ ÿßŸÑŸàÿßÿ¨Ÿáÿ© ÿßŸÑÿÆŸÑŸÅŸäÿ©
        const MarketplaceAPI = {
            // ÿßŸÑÿ≠ÿµŸàŸÑ ÿπŸÑŸâ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ≥ŸàŸÇ
            getMarketplaceData: async function() {
                // ŸÖÿ≠ÿßŸÉÿßÿ© ÿßÿ≥ÿ™ÿØÿπÿßÿ° API
                return new Promise(resolve => {
                    setTimeout(() => {
                        resolve(marketplaceData);
                    }, 500);
                });
            },

            // ÿ¥ÿ±ÿßÿ° ŸÖŸÜÿ™ÿ¨
            purchaseProduct: async function(productId, paymentMethod) {
                // ŸÖÿ≠ÿßŸÉÿßÿ© ÿßÿ≥ÿ™ÿØÿπÿßÿ° API
                return new Promise(resolve => {
                    setTimeout(() => {
                        resolve({ success: true, transactionId: Date.now() });
                    }, 1000);
                });
            },

            // ÿ•ÿ∂ÿßŸÅÿ© ÿ•ŸÑŸâ ÿßŸÑŸÖŸÅÿ∂ŸÑÿ©
            addToWishlist: async function(productId) {
                // ŸÖÿ≠ÿßŸÉÿßÿ© ÿßÿ≥ÿ™ÿØÿπÿßÿ° API
                return new Promise(resolve => {
                    setTimeout(() => {
                        resolve({ success: true });
                    }, 300);
                });
            },

            // ÿ™ÿ±ŸÇŸäÿ© ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ
            upgradeSubscription: async function(plan) {
                // ŸÖÿ≠ÿßŸÉÿßÿ© ÿßÿ≥ÿ™ÿØÿπÿßÿ° API
                return new Promise(resolve => {
                    setTimeout(() => {
                        resolve({ success: true, newPlan: plan });
                    }, 1500);
                });
            },

            // ÿ•ÿ∂ÿßŸÅÿ© ÿ±ÿµŸäÿØ
            addFunds: async function(amount, paymentMethod) {
                // ŸÖÿ≠ÿßŸÉÿßÿ© ÿßÿ≥ÿ™ÿØÿπÿßÿ° API
                return new Promise(resolve => {
                    setTimeout(() => {
                        resolve({ success: true, newBalance: marketplaceData.user.wallet + amount });
                    }, 1000);
                });
            }
        };